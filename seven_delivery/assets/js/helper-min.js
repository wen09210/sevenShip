!function(r){function e(e,n,a,i){if("addEventListener"in e)try{e.addEventListener(n,a,i)}catch(t){if("object"!=typeof a||!a.handleEvent)throw t;e.addEventListener(n,function(t){a.handleEvent.call(a,t)},i)}else"attachEvent"in e&&("object"==typeof a&&a.handleEvent?e.attachEvent("on"+n,function(){a.handleEvent.call(a)}):e.attachEvent("on"+n,a))}function a(e,n,a,i){if("removeEventListener"in e)try{e.removeEventListener(n,a,i)}catch(t){if("object"!=typeof a||!a.handleEvent)throw t;e.removeEventListener(n,function(t){a.handleEvent.call(a,t)},i)}else"detachEvent"in e&&("object"==typeof a&&a.handleEvent?e.detachEvent("on"+n,function(){a.handleEvent.call(a)}):e.detachEvent("on"+n,a))}var t;window.MBP=window.MBP||{},MBP.viewportmeta=r.querySelector&&r.querySelector('meta[name="viewport"]'),MBP.ua=navigator.userAgent,MBP.scaleFix=function(){MBP.viewportmeta&&/iPhone|iPad|iPod/.test(MBP.ua)&&!/Opera Mini/.test(MBP.ua)&&(MBP.viewportmeta.content="width=device-width, minimum-scale=1.0, maximum-scale=1.0",r.addEventListener("gesturestart",MBP.gestureStart,!1))},MBP.gestureStart=function(){MBP.viewportmeta.content="width=device-width, minimum-scale=0.25, maximum-scale=1.6"},MBP.BODY_SCROLL_TOP=!1,MBP.getScrollTop=function(){var t=window,e=r;return t.pageYOffset||"CSS1Compat"===e.compatMode&&e.documentElement.scrollTop||e.body.scrollTop||0},MBP.hideUrlBar=function(){var t=window;location.hash||!1===MBP.BODY_SCROLL_TOP||t.scrollTo(0,1===MBP.BODY_SCROLL_TOP?0:1)},MBP.hideUrlBarOnLoad=function(){var t,e=window,n=e.document;e.navigator.standalone||location.hash||!e.addEventListener||(window.scrollTo(0,1),MBP.BODY_SCROLL_TOP=1,t=setInterval(function(){n.body&&(clearInterval(t),MBP.BODY_SCROLL_TOP=MBP.getScrollTop(),MBP.hideUrlBar())},15),e.addEventListener("load",function(){setTimeout(function(){MBP.getScrollTop()<20&&MBP.hideUrlBar()},0)},!1))},MBP.fastButton=function(t,e,n){if(this.handler=e,this.pressedClass=void 0===n?"pressed":n,MBP.listenForGhostClicks(),t.length&&1<t.length)for(var a in t)this.addClickEvent(t[a]);else this.addClickEvent(t)},MBP.fastButton.prototype.handleEvent=function(t){switch((t=t||window.event).type){case"touchstart":this.onTouchStart(t);break;case"touchmove":this.onTouchMove(t);break;case"touchend":case"click":this.onClick(t)}},MBP.fastButton.prototype.onTouchStart=function(t){var e=t.target||t.srcElement;t.stopPropagation(),e.addEventListener("touchend",this,!1),r.body.addEventListener("touchmove",this,!1),this.startX=t.touches[0].clientX,this.startY=t.touches[0].clientY,e.className+=" "+this.pressedClass},MBP.fastButton.prototype.onTouchMove=function(t){(10<Math.abs(t.touches[0].clientX-this.startX)||10<Math.abs(t.touches[0].clientY-this.startY))&&this.reset(t)},MBP.fastButton.prototype.onClick=function(t){var e=(t=t||window.event).target||t.srcElement;t.stopPropagation&&t.stopPropagation(),this.reset(t),this.handler.apply(t.currentTarget,[t]),"touchend"===t.type&&MBP.preventGhostClick(this.startX,this.startY);var n=new RegExp(" ?"+this.pressedClass,"gi");e.className=e.className.replace(n,"")},MBP.fastButton.prototype.reset=function(t){var e=t.target||t.srcElement;a(e,"touchend",this,!1),a(r.body,"touchmove",this,!1);var n=new RegExp(" ?"+this.pressedClass,"gi");e.className=e.className.replace(n,"")},MBP.fastButton.prototype.addClickEvent=function(t){e(t,"touchstart",this,!1),e(t,"click",this,!1)},MBP.preventGhostClick=function(t,e){MBP.coords.push(t,e),window.setTimeout(function(){MBP.coords.splice(0,2)},2500)},MBP.ghostClickHandler=function(t){if(!MBP.hadTouchEvent&&MBP.dodgyAndroid)return t.stopPropagation(),void t.preventDefault();for(var e=0,n=MBP.coords.length;e<n;e+=2){var a=MBP.coords[e],i=MBP.coords[e+1];Math.abs(t.clientX-a)<25&&Math.abs(t.clientY-i)<25&&(t.stopPropagation(),t.preventDefault())}},MBP.dodgyAndroid="ontouchstart"in window&&-1!==navigator.userAgent.indexOf("Android 2.3"),MBP.listenForGhostClicks=(t=!1,function(){t||(r.addEventListener&&r.addEventListener("click",MBP.ghostClickHandler,!0),e(r.documentElement,"touchstart",function(){MBP.hadTouchEvent=!0},!1),t=!0)}),MBP.coords=[],MBP.autogrow=function(t,e){var n=e||12,a=t.currentStyle?t.currentStyle.lineHeight:getComputedStyle(t,null).lineHeight;function i(){var t=this.scrollHeight;this.clientHeight<t&&(this.style.height=t+3*a+"px")}a=-1===a.indexOf("px")?n:parseInt(a,10),t.style.overflow="hidden",t.addEventListener?t.addEventListener("input",i,!1):t.attachEvent("onpropertychange",i)},MBP.enableActive=function(){r.addEventListener("touchstart",function(){},!1)},MBP.preventScrolling=function(){r.addEventListener("touchmove",function(t){"range"!==t.target.type&&t.preventDefault()},!1)},MBP.preventZoom=function(){if(MBP.viewportmeta&&navigator.platform.match(/iPad|iPhone|iPod/i))for(var t=r.querySelectorAll("input, select, textarea"),e="width=device-width,initial-scale=1,maximum-scale=",n=0,a=t.length,i=function(){MBP.viewportmeta.content=e+"1"},o=function(){MBP.viewportmeta.content=e+"10"};n<a;n++)t[n].onfocus=i,t[n].onblur=o},MBP.startupImage=function(){var t,e,n,a,i,o;n=window.devicePixelRatio,a=r.getElementsByTagName("head")[0],"iPad"===navigator.platform?(t=2===n?"img/startup/startup-tablet-portrait-retina.png":"img/startup/startup-tablet-portrait.png",e=2===n?"img/startup/startup-tablet-landscape-retina.png":"img/startup/startup-tablet-landscape.png",(i=r.createElement("link")).setAttribute("rel","apple-touch-startup-image"),i.setAttribute("media","screen and (orientation: portrait)"),i.setAttribute("href",t),a.appendChild(i),(o=r.createElement("link")).setAttribute("rel","apple-touch-startup-image"),o.setAttribute("media","screen and (orientation: landscape)"),o.setAttribute("href",e),a.appendChild(o)):(t=2===n?"img/startup/startup-retina.png":"img/startup/startup.png",t=568===screen.height?"img/startup/startup-retina-4in.png":t,(i=r.createElement("link")).setAttribute("rel","apple-touch-startup-image"),i.setAttribute("href",t),a.appendChild(i)),navigator.platform.match(/iPhone|iPod/i)&&568===screen.height&&navigator.userAgent.match(/\bOS 6_/)&&MBP.viewportmeta&&(MBP.viewportmeta.content=MBP.viewportmeta.content.replace(/\bwidth\s*=\s*320\b/,"width=320.1").replace(/\bwidth\s*=\s*device-width\b/,""))}}(document);